# ğŸ¯ æœ€ç»ˆéƒ¨ç½²æ¸…å•

## å·²ä¿®å¤çš„é—®é¢˜æ±‡æ€»

### 1ï¸âƒ£ è·¯ç”±å†²çªé—®é¢˜ âœ…
- **Commit**: a2c1dad
- **é—®é¢˜**: `/prompts/my` è¢«é”™è¯¯åŒ¹é…åˆ° `/:id` è·¯ç”±
- **ä¿®å¤**: å°†ç‰¹å®šè·¯ç”±ç§»åˆ°å‚æ•°è·¯ç”±ä¹‹å‰

### 2ï¸âƒ£ getMyPrompts æ•°æ®ç»“æ„ âœ…
- **Commit**: e7db05e
- **é—®é¢˜**: è¿”å›æ•°æ®ç»“æ„ä¸å‰ç«¯ä¸åŒ¹é…
- **ä¿®å¤**: æ§åˆ¶å™¨åŒ…è£…æ•°æ®ä¸º `{ prompts: [], pagination: {} }`

### 3ï¸âƒ£ getPrompts æœåŠ¡å±‚ç»“æ„ âœ…
- **Commit**: 72791d5
- **é—®é¢˜**: æœåŠ¡å±‚è¿”å›çš„æ•°æ®ç»“æ„ä¸ä¸€è‡´
- **ä¿®å¤**: ç»Ÿä¸€è¿”å› `{ data: { prompts: [] }, pagination: {} }`

### 4ï¸âƒ£ getUserFavorites æ§åˆ¶å™¨ âœ…
- **Commit**: 8cf701b
- **é—®é¢˜**: æ”¶è—æ¥å£è¿”å›æ•°æ®ç»“æ„ä¸åŒ¹é…
- **ä¿®å¤**: ç¡®ä¿è¿”å›æ­£ç¡®çš„æ•°æ®åŒ…è£…

### 5ï¸âƒ£ getUserFavorites æœåŠ¡å±‚ âœ…
- **Commit**: æœ€æ–°
- **é—®é¢˜**: æœåŠ¡å±‚è¿”å›ç»“æ„ä¸ä¸€è‡´
- **ä¿®å¤**: ç»Ÿä¸€æ•°æ®ç»“æ„

---

## ğŸš€ ç«‹å³åœ¨ç”Ÿäº§æœåŠ¡å™¨æ‰§è¡Œ

### ä¸€é”®éƒ¨ç½²å‘½ä»¤

```bash
cd /var/www/promptvalar && \
git pull origin main && \
cd backend && \
npm run build && \
pm2 restart promptvalar-backend && \
pm2 status && \
echo "" && \
echo "=========================================" && \
echo "âœ… éƒ¨ç½²å®Œæˆï¼" && \
echo "=========================================" && \
echo "" && \
echo "éªŒè¯æ­¥éª¤ï¼š" && \
echo "1. è®¿é—® https://tablevision.top" && \
echo "2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ (Ctrl+Shift+Delete)" && \
echo "3. ç™»å½•å¹¶æµ‹è¯•æ‰€æœ‰é¡µé¢" && \
echo ""
```

---

## âœ… ä¿®å¤ååº”è¯¥æ­£å¸¸çš„åŠŸèƒ½

### Dashboard é¡µé¢
- âœ… ç»Ÿè®¡æ•°æ®æ­£å¸¸åŠ è½½
- âœ… æ—  "Cannot read properties of undefined" é”™è¯¯

### My Prompts é¡µé¢ (/dashboard/prompts)
- âœ… é¡µé¢æ ‡é¢˜æ˜¾ç¤º "My Prompts"ï¼ˆè‹±æ–‡ï¼‰
- âœ… æç¤ºè¯åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- âœ… æœç´¢åŠŸèƒ½æ­£å¸¸
- âœ… æ’åºåŠŸèƒ½æ­£å¸¸
- âœ… ç¼–è¾‘/åˆ é™¤/æŸ¥çœ‹æŒ‰é’®æ­£å¸¸
- âœ… åˆ†é¡µåŠŸèƒ½æ­£å¸¸
- âœ… ç©ºçŠ¶æ€æ˜¾ç¤ºè‹±æ–‡æç¤º

### My Favorites é¡µé¢ (/dashboard/favorites)
- âœ… é¡µé¢æ ‡é¢˜æ˜¾ç¤º "My Favorites"ï¼ˆè‹±æ–‡ï¼‰
- âœ… æ”¶è—åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- âœ… æœç´¢åŠŸèƒ½æ­£å¸¸
- âœ… æ’åºåŠŸèƒ½æ­£å¸¸
- âœ… å–æ¶ˆæ”¶è—æŒ‰é’®æ­£å¸¸
- âœ… åˆ†é¡µåŠŸèƒ½æ­£å¸¸
- âœ… ç©ºçŠ¶æ€æ˜¾ç¤ºè‹±æ–‡æç¤º

---

## ğŸ” é¢„æœŸçš„ API å“åº”æ ¼å¼

### `/api/v1/prompts/my`
```json
{
  "success": true,
  "data": {
    "prompts": [...],
    "pagination": {
      "page": 1,
      "limit": 12,
      "total": 0,
      "pages": 0
    }
  },
  "meta": {
    "timestamp": "2025-10-25T..."
  }
}
```

### `/api/v1/prompts/favorites/me`
```json
{
  "success": true,
  "data": {
    "prompts": [...],
    "pagination": {
      "page": 1,
      "limit": 12,
      "total": 0,
      "pages": 0
    }
  },
  "meta": {
    "timestamp": "2025-10-25T..."
  }
}
```

---

## â±ï¸ éƒ¨ç½²æ—¶é—´çº¿

| æ­¥éª¤ | é¢„è®¡æ—¶é—´ |
|------|---------|
| Git pull | 5-10ç§’ |
| npm run build | 30-60ç§’ |
| pm2 restart | 5ç§’ |
| **æ€»è®¡** | **çº¦ 1-2 åˆ†é’Ÿ** |

---

## ğŸ“‹ éƒ¨ç½²åéªŒè¯æ­¥éª¤

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
pm2 status
pm2 logs promptvalar-backend --lines 30
```

### 2. æµ‹è¯• API ç«¯ç‚¹
```bash
# æµ‹è¯•åç«¯å¥åº·æ£€æŸ¥
curl -I https://api.tablevision.top/health

# æµ‹è¯•å‰ç«¯
curl -I https://tablevision.top
```

### 3. æµè§ˆå™¨æµ‹è¯•
1. è®¿é—® `https://tablevision.top`
2. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**ï¼ˆå¿…é¡»ï¼ï¼‰
   - æŒ‰ `Ctrl + Shift + Delete`
   - æˆ–ä½¿ç”¨ç¡¬åˆ·æ–° `Ctrl + Shift + R`
3. ç™»å½•è´¦æˆ·
4. ä¾æ¬¡è®¿é—®å¹¶æµ‹è¯•ï¼š
   - Dashboard
   - My Prompts
   - My Favorites

### 4. æ£€æŸ¥æ§åˆ¶å°
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼Œç¡®è®¤ï¼š
- âœ… æ—  JavaScript é”™è¯¯
- âœ… æ‰€æœ‰ API è¯·æ±‚è¿”å› 200
- âœ… æ•°æ®æ­£ç¡®åŠ è½½

---

## ğŸ› å¦‚æœä»æœ‰é—®é¢˜

### æŸ¥çœ‹åç«¯æ—¥å¿—
```bash
pm2 logs promptvalar-backend --lines 100
```

### æŸ¥çœ‹ Nginx æ—¥å¿—
```bash
tail -f /var/log/nginx/error.log
```

### æµ‹è¯•ç‰¹å®š API
```bash
# éœ€è¦å…ˆè·å– token
TOKEN="your_jwt_token"

# æµ‹è¯• my prompts
curl -H "Authorization: Bearer $TOKEN" \
  https://api.tablevision.top/api/v1/prompts/my?page=1&limit=12

# æµ‹è¯• favorites
curl -H "Authorization: Bearer $TOKEN" \
  https://api.tablevision.top/api/v1/prompts/favorites/me?page=1&limit=12
```

### é‡å¯æ‰€æœ‰æœåŠ¡
```bash
pm2 restart all
sudo systemctl restart nginx
```

---

## âœ… æˆåŠŸæ ‡å¿—

å½“æ‚¨çœ‹åˆ°ä»¥ä¸‹å†…å®¹æ—¶ï¼Œè¯´æ˜éƒ¨ç½²æˆåŠŸï¼š

1. **PM2 çŠ¶æ€**:
   ```
   â”‚ promptvalar-backend â”‚ online â”‚
   ```

2. **æµè§ˆå™¨æ§åˆ¶å°**: æ— é”™è¯¯

3. **é¡µé¢å†…å®¹**:
   - Dashboard æ˜¾ç¤ºç»Ÿè®¡æ•°æ®
   - My Prompts æ˜¾ç¤ºæç¤ºè¯åˆ—è¡¨ï¼ˆè‹±æ–‡ç•Œé¢ï¼‰
   - My Favorites æ˜¾ç¤ºæ”¶è—åˆ—è¡¨ï¼ˆè‹±æ–‡ç•Œé¢ï¼‰
   - æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

---

## ğŸ‰ éƒ¨ç½²å®Œæˆå

1. **ç›‘æ§ä¸€æ®µæ—¶é—´**: è§‚å¯Ÿ PM2 æ—¥å¿—ï¼Œç¡®ä¿æ— é”™è¯¯
2. **å¤‡ä»½**: ç¡®è®¤è‡ªåŠ¨å¤‡ä»½æ­£å¸¸è¿è¡Œ
3. **æ–‡æ¡£**: æ›´æ–°éƒ¨ç½²è®°å½•

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿåœ¨ç”Ÿäº§æœåŠ¡å™¨ä¸Šæ‰§è¡Œä¸€é”®éƒ¨ç½²å‘½ä»¤ï¼** ğŸš€

*æœ€åæ›´æ–°: 2025-10-25*

